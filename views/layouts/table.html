<section id="table">
  <div class="mt-3 table-responsive module-table-container bg-white">
    <table class="module-table table table-sm">
      <thead class="sticky-top">
        <tr>
          {% for col in columns %}
          <th class="px-2 align-middle" nowrap>{{ col }}</th>
          {% endfor %}
          <th></th>
        </tr>
      </thead>
      <tbody>
        {% for item in data %}
        <tr>
          {% for col, value in item %}
          <td class="px-2 align-middle" nowrap>
            {% if edit_enabled and col == primary_key %}
            <a
              class="fw-bold"
              href="{{ moduleRoute(edit_route, item.id) }}"
              title="Edit"
            >{{ value }}</a
            >
            {% else %} {{ value }} {% endif %}
          </td>
          {% endfor %}
          <td class="actions">
            <div class="d-flex justify-content-end align-middle">
              {% if edit_enabled %}
              <a
                title="Edit"
                href="{{ moduleRoute(edit_route, item.id) }}"
                class="btn"
              ><span data-feather="edit"></span
                ></a>
              {% endif %} {% if destroy_enabled %}
              <form
                method="POST"
                class="d-inline d-flex align-items-center"
                action="{{ moduleRoute(destroy_route, item[primary_key]) }}"
              >
                {{ csrf()|raw }}
                <button
                  title="Delete"
                  onClick="return confirm('Are you sure?')"
                  class="btn"
                >
                  <span data-feather="trash"></span>
                </button>
              </form>
              {% endif %}
            </div>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% if total_pages > 1 %}
  <div class="d-flex align-items-center bg-white p-2">
    <nav aria-label="Page navigation example">
      <ul class="pagination pagination-sm m-0 p-0">
        <li class="page-item {% if page - 1 <= 0 %}disabled{% endif %}">
          <a class="page-link" href="?page={{page - 1}}" aria-label="Previous">
            <span aria-hidden="true">&laquo;</span>
          </a>
        </li>
        {% for i in (page - 3..page)|filter(index => index > 0) %}
        <li class="page-item{% if page == i %} active{% endif %}"><a class="page-link" href="?page={{i}}">{{ i }}</a></li>
        {% endfor %}
        {% for i in (page..page + 3)|filter(index => index < total_pages + 1 and index != page) %}
          <li class="page-item{% if page == i %} active{% endif %}"><a class="page-link" href="?page={{i}}">{{ i }}</a></li>
          {% endfor %}
          <li class="page-item {% if page + 1 >= total_pages %}disabled{% endif %}">
            <a class="page-link" href="?page={{page + 1}}" aria-label="Next">
              <span aria-hidden="true">&raquo;</span>
            </a>
          </li>
      </ul>
    </nav>
    <div class="w-100 d-flex justify-content-end">
      <form class="d-flex d-inline align-items-center" method="GET">
        <label class="pe-1" style="white-space: nowrap;">Per page</label>
        <select name="per_page" onChange="this.form.submit()" class="form-select form-select-sm" aria-label="Small select">
          {% for value in per_page_options %}
          <option value="{{ value }}" {% if per_page == value %}selected{% endif %}>{{ value }}</option>
          {% endfor %}
        </select>
      </form>
    </div>
  </div>
  {% endif %}
</section>
